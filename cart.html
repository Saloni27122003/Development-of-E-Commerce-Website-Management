<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
    <title>Shoply — Cart</title>    
</head>

<body>
<header class="header">
  <div class="container nav">
    <a href="index.html" class="brand">Shoply</a>
    <div class="navlinks">
      <a href="product.html" class="btn">Products</a>
      <a href="cart.html" class="btn">Cart</a>
    </div>
  </div>
</header>

<main class="container">
  <h1>Your Cart</h1>
  <div id="cartRoot">Loading...</div>
</main>

<script>
const root = document.getElementById("cartRoot");

async function loadCart() {
  try {
    const res = await fetch("http://127.0.0.1:5000/cart/cart");
    const items = await res.json();
    console.log(items);

    if (!items.length) {
      root.innerHTML = `<div class="empty">Your cart is empty. 
        <a href="product.html">Shop now</a>
      </div>`;
      return;
    }

   

    root.innerHTML = `
    <div class="card">
      <table class="table">
        <thead>
          <tr><th>Product</th><th>Price</th><th>Qty</th><th>Subtotal</th></tr>
        </thead>
        <tbody>
          ${items.map(it => `
            <tr>
              <td>your product id is :${it.product_id}</td>
              
              <td>${it.qantity}</td>
              
            </tr>
          `).join("")}
        </tbody>
      </table>

      
    </div>
    `;
  } catch(err) {
    root.innerHTML = "<p style='color:red'>Failed to load cart ❌</p>";
    console.error(err);
  }
}

// load cart when page opens
loadCart();
</script>

</body>
</html>
